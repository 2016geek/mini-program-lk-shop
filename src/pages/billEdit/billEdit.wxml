<wxs src="./billEdit.wxs" module="moneyTool" />
<view class="bill-edit">
  <view class="img-list">
    <view class="img-wrapper" wx:key="index" wx:for="{{imgList}}">
      <image
        class="img"
        src="{{item}}"
        mode="aspectFill"
        lazy-load="false"
        binderror=""
        bindload=""
      ></image>
      <text class="icon-close"></text>
    </view>
    <view class="add-img" wx:if="{{imgList.length<3}}" bindtap = "addImg">
      <view class="icon-photo"></view>
      <text class="desc">拍照</text>
    </view>
  </view>
  <view class="part">
    <view class="title-wrapper">
      <view class="title">客户</view>
      <view class="other">
        <view bindtap = "setDebtorVisible" class="add">添加</view>
      </view>
    </view>
    <view class="tag-list">
      <view bindtap = "choseDebtor" data-value="{{item.id}}" wx:for="{{debtorNameList}}" wx:key="index" class="{{debtorId==item.id?'active':''}} tag-item">{{item.debtorName}}</view>
    </view>
  </view>
  <view class="part">
    <view class="title-wrapper">
      <view class="title">账单日期</view>
      <view class="other">
        <picker
          class="bill-date-wrapper"
          mode="date"
          value="{{billTime}}"
          bindchange="bindDateChange"
        >
          <view class="picker">
            {{billTime}}
          </view>
        </picker>
      </view>
    </view>
  </view>
  <view class="part">
    <view class="title-wrapper">
      <view class="title">项目名称</view>
      <view class="other">
        <input
          value="{{billName}}"
          bindinput="onBillNameInput"
          placeholder-class="input-placeholder"
          class="input"
          placeholder="请输入项目名称(限制20字)"
          maxlength="20"
          type="text"
        />
      </view>
    </view>
  </view>
  <view class="part">
    <view class="title-wrapper">
      <view class="title">备注</view>
      <view class="other">
        <input
          value="{{billMemo}}"
          bindinput="onBillMemoInput"
          placeholder-class="input-placeholder"
          class="input"
          maxlength="20"
          placeholder="请输入备注信息(限制20字)"
          type="text"
        />
      </view>
    </view>
  </view>
  <view class="part">
    <view class="title-wrapper">
      <view class="title">打样</view>
      <view class="other">
        <switch color="#3432C1" checked="{{proofing}}" type="switch" bindchange="proofingChange"></switch>
      </view>
    </view>
  </view>
  <view class="price-wrapper" wx:if="{{proofing}}">
    <view class="row">
      <view class="input-item">
        <view class="label">金额</view>
        <input class="input" value="{{settlementAmount}}" type="number">
        </input>
      </view>
    </view>
  </view>
  <view class="price-wrapper"  wx:else>
    <view class="row">
      <view class="input-item">
        <view class="label">数量</view>
        <input class="input" value="{{mount}}" type="number">
        </input>
      </view>
      <view class="input-item">
        <view class="label">单价</view>
        <input class="input" value="{{singlePrice}}" type="number">
        </input>
      </view>
    </view>
    
    <view class="row">
      <view class="input-item-wrapper" wx:key="index" wx:for="{{extralPrice}}">
        <view class="input-item">
          <view class="label">附加费</view>
          <input class="input" value="{{item}}" type="number">
          </input>
        </view>
        <view class="control-icon {{index!=0?'reduce':'add'}}"></view>
      </view>
    </view>
    <view class="row-other">
      <view class="label">总额</view>
      <view class="total-wrapper">
        <view class="unit-wrapper">
          <view class="unit">￥</view>
          <view class="dot-name">{{moneyTool.getBit(settlementAmount)}}</view>
        </view>
        <input type="number" class="number" value="{{settlementAmount}}"></input>
      </view>
    </view>
  </view>
  <view class="bottom-btn">完成</view>
  <dialog title="添加客户" visible="{{userDialogVisible}}"  bindClose="closeDialog" bindConfirm="addDebtor">
    <baseInput placeholder="请输入客户名称" bindInput="onDebtorInput" value="{{addDebtorName}}" max="8"></baseInput>
  </dialog>
</view>
